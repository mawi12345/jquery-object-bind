/*!
 * jQuery Object bind v0.5.3
 *
 * Copyright Martin Wind.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */(function(a,b){function e(b,c){var d=b.slice(),e=c;while(d.length>0){var f=d.shift();if(a.isPlainObject(e[f]))e=e[f];else{if(!a.isPlainObject(e["*"]))break;e=e["*"]}}return a.isPlainObject(e)&&a.isFunction(e.toModel)&&a.isFunction(e.toView)?e:{toView:function(a){return typeof a=="boolean"?a?1:0:a},toModel:function(a){return a}}}function f(a){return typeof a=="string"?a.substr(0,1)=="_":!1}function g(b){a.each(b,function(c,d){if(f(c))return;a.isPlainObject(d)||a.isArray(d)?g(d):a.isFunction(d)||b.unwatch(c)})}function h(g,j,k,l,m){m==b&&(m=new Array),l==b&&(l=g),a.each(l,function(b,n){if(f(b))return;if(a.isPlainObject(n)||a.isArray(n)){var o=m.slice();o.push(b),h(g,j,k,n,o)}else{var p=m.slice();p.push(b),a.isFunction(n)&&(n=a.proxy(n,g)());var q=j.find(k.selector(p)),r=e(p,k.converter);q[k.accessFn](r.toView(n)),k.watchTarget&&q.on("change"+d,function(){var b=r.toModel(a(this)[k.accessFn]());i(g,p,b),k.convertBackOnChange&&!k.watchObject&&a(this)[k.accessFn](r.toView(b))}),k.watchObject&&l.watch(b,function(b,d,f){return a.each(g._containers,function(a,b){var d=b.data(c),g=b.find(d.selector(p)),h=e(p,d.converter);g[d.accessFn](h.toView(f))}),f})}})}function i(b,c,d){var e=c.slice(),f=b;while(e.length>1)f=f[e.shift()];var g=e.shift();a.isFunction(f[g])?a.proxy(f[g],b)(d):f[g]=d}var c="bind-object-options",d=".bindobject";a.fn.extend({bindObject:function(e,f){var i=a(this),j={converter:{},watchTarget:!0,watchObject:!1,convertBackOnChange:!0,selector:function(a){return'[name="'+a.join("-")+'"]'},accessFn:"val"},k;if(typeof f=="string"){k=f,f=a.extend({},i.data(c));if(k=="update")f.watchTarget=!1,f.watchObject=!1;else if(k=="unbind")return i.off(d),e._containers=a.grep(e._containers,function(a){return!a.is(i)}),e._containers.length==0&&(delete e._containers,f.watchObject&&g(e)),i}var f=a.extend({},j,f);return k==b&&(i.data(c,f),a.isArray(e._containers)?e._containers.push(i):e._containers=[i]),h(e,i,f),i}})})(jQuery);