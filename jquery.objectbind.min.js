/*!
* jQuery Object bind v0.1
*
* Copyright Martin Wind.
* Dual licensed under the MIT or GPL Version 2 licenses.
*/(function(a,b){function c(b,c){var d=b.slice(),e=c;while(d.length>0){var f=d.shift();if(!a.isPlainObject(e[f]))break;e=e[f]}return a.isPlainObject(e)&&a.isFunction(e.toModel)&&a.isFunction(e.toView)?e:{toView:function(a){return a},toModel:function(a){return a}}}function d(b,f,g,h,i){typeof i=="undefined"&&(i=new Array),typeof h=="undefined"&&(h=b),a.each(h,function(j,k){if(j.substr(0,1)=="_")return;if(a.isPlainObject(k)||a.isArray(k)){var l=i.slice();l.push(j),d(b,f,g,k,l)}else{var m=i.slice();m.push(j),a.isFunction(k)&&(k=a.proxy(k,b)());var n=g.namespaceToString(m),o=f.find(g.selector.replace(/%/g,n)),p=c(m,g.converter);o.val(p.toView(k)),g.watchTarget&&o.bind("change",function(){e(b,m,p.toModel(a(this).val()))}),g.watchObject&&h.watch(j,function(d,e,f){return a.each(b._targets,function(a,b){var d=b.data("bind-object-options"),e=b.find(d.selector.replace(/%/g,n)),g=c(m,d.converter);e.val(g.toView(f))}),f})}})}function e(b,c,d){var e=c.slice(),f=b;while(e.length>1)f=f[e.shift()];var g=e.shift();a.isFunction(f[g])?a.proxy(f[g],b)(d):f[g]=d}a.fn.extend({bindObject:function(b,c){var e={converter:{},watchTarget:!0,watchObject:!1,selector:'[name="%"]',namespaceToString:function(a){return a.join("-")}},c=a.extend({},e,c),f=a(this);f.data("bind-object-options",c),c.watchObject&&(a.isArray(b._targets)?b._targets.push(f):b._targets=[f]),d(b,f,c)}})})(jQuery);