/*!
 * jQuery Object bind v0.5.1
 *
 * Copyright Martin Wind.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */(function(a,b){function e(b,c){var d=b.slice(),e=c;while(d.length>0){var f=d.shift();if(!a.isPlainObject(e[f]))break;e=e[f]}return a.isPlainObject(e)&&a.isFunction(e.toModel)&&a.isFunction(e.toView)?e:{toView:function(a){return a},toModel:function(a){return a}}}function f(b){a.each(b,function(c,d){if(c.substr(0,1)=="_")return;a.isPlainObject(d)||a.isArray(d)?f(d):a.isFunction(d)||b.unwatch(c)})}function g(f,i,j,k,l){l==b&&(l=new Array),k==b&&(k=f),a.each(k,function(b,m){if(b.substr(0,1)=="_")return;if(a.isPlainObject(m)||a.isArray(m)){var n=l.slice();n.push(b),g(f,i,j,m,n)}else{var o=l.slice();o.push(b),a.isFunction(m)&&(m=a.proxy(m,f)());var p=i.find(j.selector(o)),q=e(o,j.converter);p[j.accessFn](q.toView(m)),j.watchTarget&&p.on("change"+d,function(){var b=q.toModel(a(this)[j.accessFn]());h(f,o,b),j.convertBackOnChange&&!j.watchObject&&a(this)[j.accessFn](q.toView(b))}),j.watchObject&&k.watch(b,function(b,d,g){return a.each(f._containers,function(a,b){var d=b.data(c),f=b.find(d.selector(o)),h=e(o,d.converter);f[d.accessFn](h.toView(g))}),g})}})}function h(b,c,d){var e=c.slice(),f=b;while(e.length>1)f=f[e.shift()];var g=e.shift();a.isFunction(f[g])?a.proxy(f[g],b)(d):f[g]=d}var c="bind-object-options",d=".bindobject";a.fn.extend({bindObject:function(e,h){var i=a(this),j={converter:{},watchTarget:!0,watchObject:!1,convertBackOnChange:!0,selector:function(a){return'[name="'+a.join("-")+'"]'},accessFn:"val"},k;if(typeof h=="string"){k=h,h=a.extend({},i.data(c));if(k=="update")h.watchTarget=!1,h.watchObject=!1;else if(k=="unbind")return i.off(d),e._containers=a.grep(e._containers,function(a){return!a.is(i)}),e._containers.length==0&&(delete e[_containers],f(e)),i}var h=a.extend({},j,h);return k==b&&(i.data(c,h),a.isArray(e._containers)?e._containers.push(i):e._containers=[i]),g(e,i,h),i}})})(jQuery),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}});